import { createAsyncThunk } from "@reduxjs/toolkit";
import axiosInstance from "../../../utils/axiosInstance";

export const register = createAsyncThunk("auth/register", async (data) => {
  try {
    // data is the object generated by form registration it may contains firstName & lastName & email & password ...
    const response = await axiosInstance.post(`/auth/register`, data);

    if (response.status === 201) {
      return response.data;
    }

    throw new Error(response.statusText);
  } catch (error) {
    return error;
  }
});

export const login = createAsyncThunk("auth/login", async (data) => {
  try {
    // data is the object generated by form login it contains email & passwords

    const response = await axiosInstance.post(`/auth/login`, data);

    if (response.status === 200) {
      return response.data;
    }

    throw new Error(response.statusText);
  } catch (error) {
    return error;
  }
});

export const logout = createAsyncThunk("auth/logout", async () => {
  try {
    const response = await axiosInstance.get(`/auth/logout`);

    if (response.status === 200) {
      return response.data;
    }
    throw new Error(response.statusText);
  } catch (error) {
    return error;
  }
});
